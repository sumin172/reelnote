server:
  port: 0  # 랜덤 포트 사용

spring:
  application:
    name: review-service-test

  # ⚠️⚠️⚠️ 매우 중요: 데이터소스 설정 ⚠️⚠️⚠️
  #
  # 이 파일에는 데이터소스 설정이 없습니다. 이는 의도적인 것입니다.
  # 모든 데이터소스 설정은 Testcontainers의 @DynamicPropertySource로 동적으로 설정됩니다.
  #
  # 만약 여기에 데이터소스 설정을 추가하면:
  # 1. 로컬 개발 데이터베이스에 연결될 수 있습니다 (위험!)
  # 2. 테스트가 로컬 DB의 데이터를 삭제할 수 있습니다 (매우 위험!)
  #
  # 모든 @SpringBootTest는 반드시 Testcontainers를 사용해야 합니다.
  # @DynamicPropertySource가 없으면 테스트가 실패하도록 설계되었습니다.

  # JPA 설정
  jpa:
    hibernate:
      ddl-auto: create  # 테이블은 자동 생성, 데이터는 트랜잭션 롤백으로 정리 (테스트용이므로 안전)
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        default_schema: app
    open-in-view: false

  # Flyway 비활성화 (테스트에서는 DDL 사용)
  # ⚠️ 중요: Flyway가 활성화되면 로컬 DB의 마이그레이션을 실행할 수 있습니다.
  flyway:
    enabled: false

  # 캐시 설정
  cache:
    type: simple

  # 메시지 소스 설정
  messages:
    basename: messages
    encoding: UTF-8
    cache-duration: 0s

# 로깅 설정
logging:
  level:
    app.reelnote.review: DEBUG
    org.springframework.web: WARN
    org.hibernate.SQL: WARN
  pattern:
    console: "%d{HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# Actuator 설정
management:
  endpoints:
    web:
      exposure:
        include: health
  endpoint:
    health:
      show-details: never
